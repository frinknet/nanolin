#!/bin/sh

VAL="$1"
DIR="/boot/$(basename "$1" .tgz)"

[ -z "$VAL" ] && readlink /boot/.current 2>/dev/null && exit

[ "$VAL" = "off" ] && rm -f /boot/.current && exit

readlink -f "$DIR" >/dev/null && ln -sfn "${DIR##*/}" /boot/.current && echo "Release ${DIR##*/} linked." && exit

echo "Not a valid release name."
